<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <data>
        <record id="view_vr_game_result_tree" model="ir.ui.view">
            <field name="name">vr.game.result.tree</field>
            <field name="model">vr.game.result</field>
            <field name="arch" type="xml">
                <tree string="Game Result">
                    <field name="id" groups="base.group_no_one"/>
                    <field name="name"/>
                    <field name="company_id" groups="base.group_multi_company"/>
                    <field name="device_id"/>
                    <field name="vr_game_id"/>
                    <field name="game_level_id"/>
                    <field name="violation"/>
                    <field name="session_start"/>
                    <field name="session_end"/>
                    <field name="reaction_time_str"/>
                    <field name="selection"/>
                    <field name="score"/>
                    <field name="status"/>
                    <field name="create_date" groups="base.group_no_one"/>
                </tree>
            </field>
        </record>

        <record id="view_vr_game_result_form" model="ir.ui.view">
            <field name="name">vr.game.result.form</field>
            <field name="model">vr.game.result</field>
            <field name="arch" type="xml">
                <form string="Website Event Menu">
                    <sheet>
                        <group>
                            <group>
                                <field name="name" groups="base.group_no_one"/>
                                <field name="vr_trainee_id"/>
                                <field name="company_code" groups="base.group_no_one"/>
                                <field name="company_id" groups="base.group_multi_company"/>
                                <field name="game_code" groups="base.group_no_one"/>
                                <field name="vr_game_id"/>
                                <field name="level_code" groups="base.group_no_one"/>
                                <field name="game_level_id"/>
                                <field name="device_id"/>
                                <field name="experience"/>
                            </group>
                            <group>
                                <field name="selection"/>
                                <field name="violation"/>
                                <field name="session_start"/>
                                <field name="session_start_str" groups="base.group_no_one"/>
                                <field name="session_end"/>
                                <field name="session_end_str" groups="base.group_no_one"/>
                                <field name="reaction_time_str"/>
                                <field name="view_time_str"/>
                                <field name="score"/>
                                <field name="status"/>
                                <field name="vr_mail_id" groups="base.group_no_one" readonly="1"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="action_vr_game_result" model="ir.actions.act_window">
            <field name="name">VR Game Results</field>
            <field name="res_model">vr.game.result</field>
            <field name="view_mode">tree,form</field>
        </record>

        <!-- Game Result Report -->
        <record id="view_vr_game_result_report_kanban" model="ir.ui.view">
            <field name="name">vr.game.result.report.kanban</field>
            <field name="model">vr.game.result.report</field>
            <field name="arch" type="xml">
                <kanban class="o_kanban_mobile" create="false" group_create="false">
                    <templates>
                        <field name="game_id"/>
                        <field name="status"/>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_content flex-grow-1">
                                <div class="o_kanban_record_title oe_kanban_details">
                                    <h3><field name="game_level_id"/></h3>
                                </div>
                                <div class="o_kanban_record_subtitle">
                                    <field name="game_id"/>
                                </div>
                                 <div class="row mt-2">
                                    <div>PIN: <field name="trainee_id"/></div>
                                    <div>Name: <field name="trainee_name" groups="virsat.group_view_vr_trainee_name"/></div>
                                    <div>Session Start: <field name="session_start"/></div>
                                    <div>Session End: <field name="session_end"/></div>
                                    <div class="mt-2">
                                        <t t-if="record.status.raw_value == 'passed'">
                                            <div class="h1"><i class="fa fa-check-circle text-success"/> Passed</div>
                                        </t>
                                        <t t-else="">
                                            <div class="h1"><i class="fa fa-times-circle-o text-danger"/> Failed</div>
                                        </t>
                                    </div>
                                 </div>
                            </div>

                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="view_vr_game_result_report_tree" model="ir.ui.view">
            <field name="name">vr.game.result.report.tree</field>
            <field name="model">vr.game.result.report</field>
            <field name="arch" type="xml">
                <tree create="0">
                    <field name="id" groups="base.group_no_one"/>
                    <field name="trainee_name"/>
                    <field name="trainee_id"/>
                    <field name="game_id"/>
                    <field name="game_level_id"/>
                    <field name="session_start"/>
                    <field name="session_end" optional="hide"/>
                    <field name="score" optional="hide"/>
                    <field name="status"/>
                    <field name="company_id" groups="base.group_multi_company"/>
                </tree>
            </field>
        </record>

        <record id="view_vr_game_result_report_search" model="ir.ui.view">
            <field name="name">vr.game.result.report.search</field>
            <field name="model">vr.game.result.report</field>
            <field name="arch" type="xml">
                <search>
                    <field name="trainee_id"/>
                    <field name="trainee_name" groups="virsat.group_view_vr_trainee_name"/>
                    <filter string="Level" name="level" context="{'group_by':'game_level_id'}"/>
                    <filter string="Game" name="game" context="{'group_by':'game_id'}"/>
                    <filter string="PIN" name="trainee" context="{'group_by':'trainee_id'}"/>
                    <filter string="Trainee Name" name="trainee" context="{'group_by':'trainee_name'}" groups="virsat.group_view_vr_trainee_name"/>
                    <filter string="Session" name="session" context="{'group_by':'session_start'}"/>
                </search>
            </field>
        </record>

        <record id="action_vr_game_result_report" model="ir.actions.act_window">
            <field name="name">Game Results</field>
            <field name="res_model">vr.game.result.report</field>
            <field name="view_mode">tree,kanban</field>
            <field name="domain">[]</field>
        </record>

        <record model="ir.actions.client" id="client_action_dashboard">
            <field name="name">Dashboard</field>
            <field name="tag">virsat.dashboard</field>
        </record>
    </data>
</odoo>